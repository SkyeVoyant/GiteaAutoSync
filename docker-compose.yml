services:
  autosync:
    container_name: GiteaAutoSync
    build: .
    environment:
      GITEA_BASE_URL: ${GITEA_BASE_URL:-https://gitea.example.com}
      GITEA_OWNER: ${GITEA_OWNER:-gitea-user}
      GITEA_TOKEN: ${GITEA_TOKEN:-replace-me}
      PROJECTS_ROOT: /data/projects
      SYNC_DEBOUNCE_MS: ${SYNC_DEBOUNCE_MS:-3000}
    volumes:
      - ${PROJECTS_ROOT:-/root/projects}:/data/projects
    restart: unless-stopped
    command: node index.js --watch
